<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.30.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.20.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.26.0"></script>
</head>
<body>
  <div id="vis-passenger-trips"></div>
  <div id="vis-top-tourism-routes"></div>
  <div id="vis-map-domestic-travel"></div>
  <div id="vis-load-factor"></div>
  <div id="vis-seasonality"></div>
  <script>
    // Vega-Lite Spec for Passenger Trips Over Time
    const passengerTripsSpec = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "An interactive line chart showing the number of passenger trips over time for major city pairs.",
    
    "data": {
      "url": "https://raw.githubusercontent.com/Sam0502/3179/refs/heads/main/test/raw_data/filtered.csv",
      "format": {"type": "csv"}
    },
    
    "transform": [
      {
        "calculate": "datum.City1 + '-' + datum.City2",
        "as": "city_pair"
      },
      {
        "calculate": "toDate(datum.Year + '-01-01')",
        "as": "YearDate"
      }
    ],
    
    "width": "container",
    "height": 500,
    
    "mark": {
      "type": "line",
      "point": true,
      "tooltip": [
        {"field": "Year", "type": "temporal", "title": "Year"},
        {"field": "city_pair", "type": "nominal", "title": "City Pair"},
        {"field": "Passenger_Trips", "type": "quantitative", "title": "Passenger Trips"}
      ]
    },
    
    "encoding": {
      "x": {
        "field": "YearDate",
        "type": "temporal",
        "title": "Year",
        "axis": {
          "format": "%Y",
          "tickCount": "year",
          "labelAngle": -45
        }
      },
      "y": {
        "field": "Passenger_Trips",
        "type": "quantitative",
        "title": "Number of Passenger Trips",
        "axis": {
          "titleColor": "#333",
          "grid": true
        }
      },
      "color": {
        "field": "city_pair",
        "type": "nominal",
        "title": "City Pair",
        "scale": {
          "scheme": "category10"
        }
      },
      "opacity": {
        "condition": {
          "selection": "highlight",
          "value": 1
        },
        "value": 0.3
      }
    },
    
    "selection": {
      "highlight": {
        "type": "multi",
        "fields": ["city_pair"],
        "bind": "legend",
        "on": "mouseover",
        "nearest": true
      },
      "zoom": {
        "type": "interval",
        "bind": "scales",
        "encodings": ["x"]
      }
    },
    
    "config": {
      "axis": {
        "labelFontSize": 12,
        "titleFontSize": 14
      },
      "legend": {
        "labelFontSize": 12,
        "titleFontSize": 14
      },
      "mark": {
        "line": {
          "strokeWidth": 2
        },
        "point": {
          "filled": true,
          "fill": "white",
          "strokeWidth": 1
        }
      }
    }
  }


    vegaEmbed("#vis-passenger-trips", passengerTripsSpec).then(console.log).catch(console.warn);

    // Vega-Lite Spec for Top Tourism Routes
    const topTourismRoutesSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "A bar chart to identify the busiest routes based on passenger trips.",
      "data": {
        "url": "https://raw.githubusercontent.com/Sam0502/3179/refs/heads/main/test/raw_data/filtered.csv",
        "format": {"type": "csv"}
      },
      "mark": "bar",
      "encoding": {
        "x": {"field": "city_pair", "type": "nominal", "title": "City Pair", "sort": "-y"},
        "y": {"field": "Passenger_Trips", "type": "quantitative", "title": "Passenger Trips"}
      },
      "width": 800,
      "height": 400
    };
    vegaEmbed("#vis-top-tourism-routes", topTourismRoutesSpec).then(console.log).catch(console.warn);

    // Add other visualizations here...

  </script>
</body>
</html>